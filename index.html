<!doctype html>
<html>

<head>
  <title>Nano FugueMax</title>
  <link rel="stylesheet" type="text/css" href="./style.css" />
</head>

<body>
  <div id="box">
    <div id="textcontainer">
      <button id="Switch">EGWALKER</button>

      <div class="inputbox">
        1
        <textarea id="one" spellcheck="false" placeholder="User 1 (type here)"></textarea>
      </div>
      <div class="inputbox">
        2
        <textarea id="two" spellcheck="false" placeholder="User 2 (type here)"></textarea>
      </div>
      <div class="inputbox">
        3
        <textarea id="three" spellcheck="false" placeholder="User 3 (type here)"></textarea>
      </div>

      <div>
        <button id="OneMergeTwo">OneMergeTwo</button>
        <button id="TwoMergeOne">TwoMergeOne</button>

        <button id="OneMergeThree">OneMergeThree</button>
        <button id="ThreeMergeOne">ThreeMergeOne</button>

        <button id="TwoMergeThree">TwoMergeThree</button>
        <button id="ThreeMergeTwo">ThreeMergeTwo</button>

        <button id="reset" onClick="reset()">Reset everything</button>
      </div>

      <table>
        <tr>
          <td></td>
          <td>oright &lt;</td>
          <td>oright =</td>
          <td>oright &gt;</td>
        </tr>
        <tr>
          <td>oleft &lt;</td>
          <td>break</td>
          <td>break</td>
          <td>break</td>
        </tr>
        <tr>
          <td>oleft =</td>
          <td>scan=true; continue</td>
          <td>compare ID ? break : scan=false; continue</td>
          <td>scan=false; continue</td>
        </tr>
        <tr>
          <td>oleft &gt;</td>
          <td>continue</td>
          <td>continue</td>
          <td>continue</td>
        </tr>
      </table>

      <pre>
let destIdx=left+1
for(i=destIdx;;i++){
if(!scanning) {destIdx = i}
if (i == doc.length || i == right) {break}
let other = doc.content[i]
if (oleft &lt; left ||
    (oleft==left && oright==right && compareId)) 
    { break }
if (oleft === left) { scanning = oright &lt; right }
}</pre>

      <ul>
        <li>
          Insert immediately if other has an earlier originLeft.
        </li>
        <li>
          Scan (ambiguous) when origins are equal but destination is earlier, could be an insertion race
        </li>
        <li>
          Compare by ID when origins are identical deterministic ordering
        </li>
        <li>
          Skip when the other item comes from a later insertion.
        </li>
      </ul>

    </div>

    <div id="historyContainer">
      <div id="historyTabs">

      </div>

      <pre id="historyContent">

    </pre>
    </div>
  </div>

  <div id="graph"></div>
</body>

<script type="module" src="./src/main.ts"></script>

</html>